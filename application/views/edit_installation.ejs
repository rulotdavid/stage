<!DOCTYPE html>
<html>
<% include partials/head.ejs %>

  <body>
    <% include partials/navigation.ejs %>

      <div class="container-fluid">
        <div class="row">
          <div class="col-md-12">
            <button onclick="save();" style="width: 200px;" type="button" class="btn btn-success pull-right"><span class="glyphicon glyphicon-ok">&nbsp;</span>Save</button>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6">
            <h1>Location</h1>
            <input id="pac-input" class="form-control" type="text" placeholder="Search address...">
            <br/>
            <h3 id="errorLoadGM">Failed to load Google Maps. Refresh the page.</h3>
            <div id="googleMap" style="height: 50vh;"></div>
          </div>
          <div class="col-md-6">
            <h1>Installation</h1>
            <div class="form-horizontal" style="margin-right: 20px;">
              <div class="form-group">
                <label style="text-align: left;" for="installation-production" class="col-sm-3 control-label">Annual production last year (kWh)</label>
                <div class="col-sm-8">
                  <input required value="1" type="number" min="1" step="0.01" class="form-control" id="installation-production" />
                </div>
                <div class="col-sm-1 control-label">
                  <button style="background-color: white;" type="button" onclick="showTipProduction()">
                      <img style="width:20px;" src="/pictures/interrogation.png"/>
                    </button>
                </div>
              </div>
              <div id="tipProduction" hidden>
                <p>
                  The platform makes it possible to compare the annual production. Enter last year's production.
                </p>
                </br>
              </div>
              <div class="form-group">
                <label style="text-align: left;" for="installation-inverter-efficiency" class="col-sm-3 control-label">Inverter efficiency (%)</label>
                <div class="col-sm-8">
                  <input required value="1" type="number" min="1" max="100" step="0.01" class="form-control" id="installation-inverter-efficiency"
                  />
                </div>
                <div class="col-sm-1 control-label">
                  <button style="background-color: white;" type="button" onclick="showTipInverterEfficiency()">
                      <img style="width:20px;" src="/pictures/interrogation.png"/>
                    </button>
                </div>
              </div>
              <div id="tipInverterEffeciency" hidden>
                <p>
                  The performance of the inverter. Read your manual to find the information.
                </p>
                </br>
              </div>
            </div>
            </br>
            <h1>Equipment</h1>
            <div>
              <!--<ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#tab-solar-panel" role="tab" data-toggle="tab">Solar panel</a></li>
                <li role="presentation"><a href="#wind-turbine" role="tab" data-toggle="tab">Wind turbine</a></li>
              </ul>
              <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="tab-solar-panel">-->
              <table class="table table-hover" id="table-equipment">
                <thead>
                  <tr>
                    <th>Technology</th>
                    <th>Nominal power (wp)</th>
                    <th>Slope (°)</th>
                    <th>Azimuth (°)</th>
                    <th>Edit</th>
                    <th>Remove</th>
                  </tr>
                </thead>
                <tbody>
                </tbody>
              </table>
              <button id="btAddEquipment" onclick="refreshModalCreateEquipment();" class="btn btn-primary pull-right" data-toggle="modal"
                data-target="#modal-equipment"><span class="glyphicon glyphicon-plus">&nbsp;</span>Add equipment</button>
              <!--</div>
                <div role="tabpanel" class="tab-pane" id="wind-turbine">
                </div>-->
            </div>
          </div>
        </div>
      </div>
      </div>
      <br/>

      <div class="modal fade" id="modal-equipment" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <form id="form-equipment" class="form-horizontal">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Equipment</h4>
              </div>
              <div class="modal-body" style="margin-right: 20px;">
                <div class="form-group">
                  <label style="text-align: left;" for="select-currentTechnologies" class="col-sm-3 control-label">Technology</label>
                  <div class="col-sm-8">
                    <select class="form-control" id="select-currentTechnologies">
                    </select>
                  </div>
                  <div class="col-sm-1 control-label">
                    <button style="background-color: white;" type="button" onclick="showTipTechnology()">
                      <img style="width:20px;" src="/pictures/interrogation.png"/>
                    </button>
                  </div>
                </div>
                <div id="tipTechnology" hidden>
                  <p>
                    The performance of PV modules depends technology. Select your PV technology.
                  </p>
                  </br>
                </div>
                <div class="form-group">
                  <label style="text-align: left;" for="equipment-nominal-power" class="col-sm-3 control-label">Nominal power (wp)</label>
                  <div class="col-sm-8">
                    <input required type="text" class="form-control" id="equipment-nominal-power" />
                  </div>
                  <div class="col-sm-1 control-label">
                    <button style="background-color: white;" type="button" onclick="showTipNominalPower()">
                      <img style="width:20px;" src="/pictures/interrogation.png"/>
                    </button>
                  </div>
                </div>
                <div id="tipNominalPower" hidden>
                  <p>
                    This is the power that the manufacturer declares that the PV array can produce under standard test conditions. Look at the
                    manual of your PV, and add this for each PV.
                  </p>
                  </br>
                </div>
                <div class="form-group">
                  <label style="text-align: left;" for="equipment-slope" class="col-sm-3 control-label">Slope (°)</label>
                  <div class="col-sm-8">
                    <input required type="number" step="0.01" min="0" max="90" class="form-control" id="equipment-slope" />
                  </div>
                  <div class="col-sm-1 control-label">
                    <button style="background-color: white;" type="button" onclick="showTipSlope()">
                      <img style="width:20px;" src="/pictures/interrogation.png"/>
                    </button>
                  </div>
                </div>
                <div id="tipSlope" hidden>
                  <p>
                    This is the angle of the PV modules from the horizontal plane. From -90 ° to 90 °.
                  </p>
                  </br>
                </div>
                <div class="form-group">
                  <label style="text-align: left;" for="equipment-azimuth" class="col-sm-3 control-label">Azimuth (°)</label>
                  <div class="col-sm-8">
                    <input required type="number" min="90" max="270" step="0.01" class="form-control" id="equipment-azimuth" />
                  </div>
                  <div class="col-sm-1 control-label">
                    <button style="background-color: white;" type="button" onclick="showTipAzimuth()">
                      <img style="width:20px;" src="/pictures/interrogation.png"/>
                    </button>
                  </div>
                </div>
                <div id="tipAzimuth" hidden>
                  <p>This is the angle of the PV modules relative to the direction. From 90° (Est) to 270° (West).
                  </p>
                  </br>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary">Ok</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <% include partials/script.ejs %>
      <script>
            var currentInstallation = <%- JSON.stringify(currentInstallation) %>;
          var currentTechnologies = <%- JSON.stringify(currentTechnologies) %>;
            </script>

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdv3Y8l7bUtzaqTkzawCBroYZqOIaWeaI&language=en&libraries=places"
          async defer></script>   
          <script src="/js/oldScripts/edit_installation.js"></script>

  </body>

</html>